<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Bueno, esta vez les traigo un bbcode parser para youtube, el cual detecta los links que son antecedidos por un espacio o por el principio de la linea. Es mi primer code en POO, cualquier sugerencia es bienvenida.
&lt;?php class YoutubeBBC { private $body, $data = array(); public function __construct($string){ $this-&gt;body = $string; } public function GetId(){ (empty($this-&gt;body)) ? die(&#39;Debe Especificar El String&#39;) : &#39;&#39;; preg_match_all(&#39;~(?&lt;=s|^)(?:https?://)?(?:www.)?youtube.com/watch?v=([w-]{0,11})~&#39;,$this-&gt;body,$IDS); if(!empty($IDS[1])){ foreach($IDS[1] as $id){ $this-&gt;data[$id][&#39;ID&#39;] = $id; } }else{ die(&#34;Link De Youtube Invalido&#34;); } } public function GetThumbs(){ (empty($this-&gt;body)) ?" />
    <meta property="og:site_name" content="Federico Scodelaro" />
    <meta property="og:title" content="[Aporte][PHP][Class] Youtube BBC parser | Federico Scodelaro"/>
    <meta property="og:description" content="Bueno, esta vez les traigo un bbcode parser para youtube, el cual detecta los links que son antecedidos por un espacio o por el principio de la linea. Es mi primer code en POO, cualquier sugerencia es bienvenida.
&lt;?php class YoutubeBBC { private $body, $data = array(); public function __construct($string){ $this-&gt;body = $string; } public function GetId(){ (empty($this-&gt;body)) ? die(&#39;Debe Especificar El String&#39;) : &#39;&#39;; preg_match_all(&#39;~(?&lt;=s|^)(?:https?://)?(?:www.)?youtube.com/watch?v=([w-]{0,11})~&#39;,$this-&gt;body,$IDS); if(!empty($IDS[1])){ foreach($IDS[1] as $id){ $this-&gt;data[$id][&#39;ID&#39;] = $id; } }else{ die(&#34;Link De Youtube Invalido&#34;); } } public function GetThumbs(){ (empty($this-&gt;body)) ?" />
    <meta property="og:image" content="https://pudymody.github.io/static/me.jpg" />
    <meta property="og:url" content="https://pudymody.github.io/taringa/aporte-php-class-youtube-bbc-parser/" >
    <meta property="og:type" content="blog" />
    
      <meta property="article:published_time" content="2011-09-05 00:00:00 &#43;0000 UTC">
    
    <title>[Aporte][PHP][Class] Youtube BBC parser | Federico Scodelaro</title>
    <link rel="stylesheet" href="https://pudymody.github.io/static/tufte.min.css" />
    <link rel="shortcut icon" href="https://pudymody.github.io/static/favicon.png" type="image/png">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://pudymody.github.io/index.xml">
  </head>

  <body>
    <header>
      <nav>
        <ul>
          
          
          <li>
            <a href="https://pudymody.github.io/">/home/federico scodelaro</a>
          </li>
          -
          <li>
            <a target="_blank" rel="noopener" href="https://github.com/pudymody">Github</a>
          </li>
          -
          <li>
            <a target="_blank" rel="noopener" href="https://telegram.me/pudymody">Telegram</a>
          </li>
          -
          <li>
            <a target="_blank" rel="noopener" href="mailto:federicoscodelaro@gmail.com">Email</a>
          </li>
          -
          

          
          
          <li>
            <a href="/index.xml">~/subscribe</a>
          </li>
          
        </ul>
      </nav>
    </header>
    <article>

<section>
<h1>[Aporte][PHP][Class] Youtube BBC parser</h1>
<p class="subtitle">2011/09/05</p>



<p>Bueno, esta vez les traigo un bbcode parser para youtube, el cual detecta los links que son antecedidos por un espacio o por el principio de la linea.
Es mi primer code en POO, cualquier sugerencia es bienvenida.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#00f">&lt;?php</span>
<span style="color:#00f">class</span> <span style="color:#2b91af">YoutubeBBC</span> {
    <span style="color:#00f">private</span> $body, $data = <span style="color:#00f">array</span>();
    
    <span style="color:#00f">public</span> <span style="color:#00f">function</span> __construct($string){
        $this-&gt;body = $string;
    }
    
    <span style="color:#00f">public</span> <span style="color:#00f">function</span> GetId(){
        (<span style="color:#00f">empty</span>($this-&gt;body)) ? <span style="color:#00f">die</span>(<span style="color:#a31515">&#39;Debe Especificar El String&#39;</span>) : <span style="color:#a31515">&#39;&#39;</span>;
        preg_match_all(<span style="color:#a31515">&#39;~(?&lt;=s|^)(?:https?://)?(?:www.)?youtube.com/watch?v=([w-]{0,11})~&#39;</span>,$this-&gt;body,$IDS);
        <span style="color:#00f">if</span>(!<span style="color:#00f">empty</span>($IDS[1])){
            <span style="color:#00f">foreach</span>($IDS[1] <span style="color:#00f">as</span> $id){
                $this-&gt;data[$id][<span style="color:#a31515">&#39;ID&#39;</span>] = $id;
            }
            
        }<span style="color:#00f">else</span>{
            <span style="color:#00f">die</span>(<span style="color:#a31515">&#34;Link De Youtube Invalido&#34;</span>);
        }
    }
    
    <span style="color:#00f">public</span> <span style="color:#00f">function</span> GetThumbs(){
        (<span style="color:#00f">empty</span>($this-&gt;body)) ? <span style="color:#00f">die</span>(<span style="color:#a31515">&#39;Debe Especificar El String&#39;</span>) : <span style="color:#a31515">&#39;&#39;</span>;
        (<span style="color:#00f">empty</span>($this-&gt;data)) ? $this-&gt;GetId() : <span style="color:#a31515">&#39;&#39;</span> ;
        <span style="color:#00f">foreach</span>($this-&gt;data <span style="color:#00f">as</span> $id){
            $this-&gt;data[$id[<span style="color:#a31515">&#39;ID&#39;</span>]][<span style="color:#a31515">&#39;Thumbs&#39;</span>] = <span style="color:#00f">array</span>(
                <span style="color:#a31515">&#39;0&#39;</span> =&gt; <span style="color:#a31515">&#39;http://img.youtube.com/vi/&#39;</span>. $id[<span style="color:#a31515">&#39;ID&#39;</span>] .<span style="color:#a31515">&#39;/0.jpg&#39;</span>,
                <span style="color:#a31515">&#39;1&#39;</span> =&gt; <span style="color:#a31515">&#39;http://img.youtube.com/vi/&#39;</span>. $id[<span style="color:#a31515">&#39;ID&#39;</span>] .<span style="color:#a31515">&#39;/1.jpg&#39;</span>,
                <span style="color:#a31515">&#39;2&#39;</span> =&gt; <span style="color:#a31515">&#39;http://img.youtube.com/vi/&#39;</span>. $id[<span style="color:#a31515">&#39;ID&#39;</span>] .<span style="color:#a31515">&#39;/2.jpg&#39;</span>,
                <span style="color:#a31515">&#39;3&#39;</span> =&gt; <span style="color:#a31515">&#39;http://img.youtube.com/vi/&#39;</span>. $id[<span style="color:#a31515">&#39;ID&#39;</span>] .<span style="color:#a31515">&#39;/3.jpg&#39;</span>,
            );
        }
    }
    
    <span style="color:#00f">public</span> <span style="color:#00f">function</span> GetEmbed($width = <span style="color:#a31515">&#39;640&#39;</span>, $height = <span style="color:#a31515">&#39;385&#39;</span>){
        (<span style="color:#00f">empty</span>($this-&gt;body)) ? <span style="color:#00f">die</span>(<span style="color:#a31515">&#39;Debe Especificar El String&#39;</span>) : <span style="color:#a31515">&#39;&#39;</span>;
        (<span style="color:#00f">empty</span>($this-&gt;data)) ? $this-&gt;GetId() : <span style="color:#a31515">&#39;&#39;</span> ;
        <span style="color:#00f">foreach</span>($this-&gt;data <span style="color:#00f">as</span> $id){
                $this-&gt;data[$id[<span style="color:#a31515">&#39;ID&#39;</span>]][<span style="color:#a31515">&#39;Embed&#39;</span>] = <span style="color:#a31515">&#39;&lt;center&gt;&lt;embed width=&#34;&#39;</span>.$width.<span style="color:#a31515">&#39;px&#34; height=&#34;&#39;</span>.$height.<span style="color:#a31515">&#39;px&#34; wmode=&#34;transparent&#34; autoplay=&#34;false&#34; allowfullscreen=&#34;true&#34; type=&#34;application/x-shockwave-flash&#34; quality=&#34;high&#34; src=&#34;http://www.youtube.com/v/&#39;</span>.$id[<span style="color:#a31515">&#39;ID&#39;</span>].<span style="color:#a31515">&#39;&#34;&gt;&lt;/center&gt;&#39;</span>;
        }
    }
    
    <span style="color:#00f">public</span> <span style="color:#00f">function</span> GetData(){
        (<span style="color:#00f">empty</span>($this-&gt;body)) ? <span style="color:#00f">die</span>(<span style="color:#a31515">&#39;Debe Especificar El String&#39;</span>) : <span style="color:#a31515">&#39;&#39;</span>;
        (<span style="color:#00f">empty</span>($this-&gt;data)) ? $this-&gt;GetId() : <span style="color:#a31515">&#39;&#39;</span> ;
        <span style="color:#00f">return</span> $this-&gt;data;
    }
}
<span style="color:#00f">?&gt;</span>
</code></pre></div>
<p>Se usa asi:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#00f">&lt;?php</span>
$BBC = <span style="color:#00f">new</span> YoutubeBBC(<span style="color:#a31515">&#34;http://www.youtube.com/watch?v=uelHwf8o7_U&amp;feature=feedrec http://www.youtube.com/watch?v=SUMcA--ejOc&amp;feature=feedrec&#34;</span>); <span style="color:#008000">//creamos un nuevo objeto pasando el texto con los links
</span><span style="color:#008000"></span>$BBC-&gt;GetID(); <span style="color:#008000">//obtenemos los ids de los videos
</span><span style="color:#008000"></span>$BBC-&gt;GetThumbs(); <span style="color:#008000">//obtenemos los thumbs de los videos
</span><span style="color:#008000"></span>$BBC-&gt;GetEmbed(); <span style="color:#008000">//obtenemos el code embed de los videos, se puede pasar como primer parametro el ancho y como segundo el alto, por default 640x385
</span><span style="color:#008000"></span>$datos = $BBC-&gt;GetData(); <span style="color:#008000">//obtenemos el array con todos los datos anteriores y lo almacenamos en $datos
</span><span style="color:#008000"></span><span style="color:#00f">?&gt;</span>
</code></pre></div>
<p>lo que devolvera un array como el siguiente;</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">Array
(
    [uelHwf8o7_U] =&gt; Array
        (
            [ID] =&gt; uelHwf8o7_U
            [Thumbs] =&gt; Array
                (
                    [0] =&gt; http://img.youtube.com/vi/uelHwf8o7_U/0.jpg
                    [1] =&gt; http://img.youtube.com/vi/uelHwf8o7_U/1.jpg
                    [2] =&gt; http://img.youtube.com/vi/uelHwf8o7_U/2.jpg
                    [3] =&gt; http://img.youtube.com/vi/uelHwf8o7_U/3.jpg
                )

            [Embed] =&gt; &lt;center&gt;&lt;embed width=<span style="color:#a31515">&#34;640px&#34;</span> height=<span style="color:#a31515">&#34;385px&#34;</span> src=<span style="color:#a31515">&#34;http://www.youtube.com/v/uelHwf8o7_U&#34;</span> quality=<span style="color:#a31515">&#34;high&#34;</span> type=<span style="color:#a31515">&#34;application/x-shockwave-flash&#34;</span> allowfullscreen=<span style="color:#a31515">&#34;true&#34;</span> autoplay=<span style="color:#a31515">&#34;false&#34;</span> wmode=<span style="color:#a31515">&#34;transparent&#34;</span>&gt;&lt;/center&gt;
        )

    [SUMcA--ejOc] =&gt; Array
        (
            [ID] =&gt; SUMcA--ejOc
            [Thumbs] =&gt; Array
                (
                    [0] =&gt; http://img.youtube.com/vi/SUMcA--ejOc/0.jpg
                    [1] =&gt; http://img.youtube.com/vi/SUMcA--ejOc/1.jpg
                    [2] =&gt; http://img.youtube.com/vi/SUMcA--ejOc/2.jpg
                    [3] =&gt; http://img.youtube.com/vi/SUMcA--ejOc/3.jpg
                )

            [Embed] =&gt; &lt;center&gt;&lt;embed width=<span style="color:#a31515">&#34;640px&#34;</span> height=<span style="color:#a31515">&#34;385px&#34;</span> src=<span style="color:#a31515">&#34;http://www.youtube.com/v/SUMcA--ejOc&#34;</span> quality=<span style="color:#a31515">&#34;high&#34;</span> type=<span style="color:#a31515">&#34;application/x-shockwave-flash&#34;</span> allowfullscreen=<span style="color:#a31515">&#34;true&#34;</span> autoplay=<span style="color:#a31515">&#34;false&#34;</span> wmode=<span style="color:#a31515">&#34;transparent&#34;</span>&gt;&lt;/center&gt;
        )

) </code></pre></div>
</section>
</article>
</body>
</html>
